# MBDyn (C) is a multibody analysis code.
# http://www.mbdyn.org
#
# Copyright (C) 1996-2024
#
# Pierangelo Masarati	<pierangelo.masarati@polimi.it>
# Paolo Mantegazza	<paolo.mantegazza@polimi.it>
#
# Dipartimento di Ingegneria Aerospaziale - Politecnico di Milano
# via La Masa, 34 - 20156 Milano, Italy
# http://www.aero.polimi.it
#
# Changing this copyright notice is forbidden.
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation (version 2 of the License).
#
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA

begin: data;
    problem: initial value;
end: data;

begin: initial value;
    set: const real dt = 4.e-3;
    time step: dt;
    initial time: 0.;
    final time: 200*dt;

    method: ms, 0.6;

    max iterations: 100;
    tolerance: 1.e-5;

    derivatives coefficient: 1.e-6;
    derivatives max iterations: 10;
    derivatives tolerance: 1.e-4;

    fictitious steps number: 0;
    fictitious steps ratio: 1.e-4;
    fictitious steps max iterations: 10;
    fictitious steps tolerance: 1.e-4;
threads: disable;
end: initial value;

begin: control data;
    default output: all;

    hydraulic nodes: 1;       #  numero nodi idraulici

    hydraulic elements: 1;    #  numero elementi idraulici

    forces: 0;                 # una forza generica

    genels: 1;
end: control data;

begin: nodes;
    hydraulic: 1, 2.e3;
end: nodes;



begin: elements;

 # density                  800 kg/m^3		kappa		     10 N/m
 # diametro               0.007 m		precarico	    300 N
 # viscosità    	    0.9 kg/m/s		larghezza          5e-3 m
 # area tubo   	       3.84 e-5 m^2		massa		  1.e-3 kg
 # lunghezza		      1	m 		area massima      2.e-4 m^2
 # area diaframma        2. e-5 m^2 50% area tubo
 # Weight peso                  N
 # Spring (costante della molla)    N/m             precarico della molla         N


    hydraulic: 11, accumulator,
                1,              # node label
	        0.2,		# stroke
		3.e-2,		# accumulator area
		3.84e-5, 	# pipe area
		4.e-1,		# mass
		gas, 1.e3, 1.e5, 1.3, 		# gas min press., gas max press., polytropic exponent
		# weight, 1000.,        # Weight
	 	# spring, 100., 0.,	# Spring (spring constant, spring preload)
		800.,           # density (?)
		1.e9,		# c_spost 1.e8,  se press0 >> p1 posso aumetare c1
		1.,		# c_vel   1000.,
		hydraulic fluid, # incompressible, density, 800.,
			linear compressible, density, 800., 2.e9, 101325.,
				viscosity, 0.0001 # m^2/s == 100 centistokes
		; # c_acc	   10.;

    # generic clamp used as pressure generator
    genel: 1111, clamp,
             1, hydraulic,
             # const, 2.2e3;       # const, p1;
             # step,10*dt, 2.e5, 2.e3;  # fine inizio
             step, 10*dt, 2.e5, 2.e3;  # fine inizio
             # linear, 1.8e7, 5.e7; # per il tubo
             # linear, 1.e5, 40000./dt;  # per la valvola di pressione
	     # linear, 1.e5, 10;
             # sine, 0.1, pi, 16*p1, 0, 0.;
             # double step, 25*dt, 75*dt, 1e6*p1, p1;
end: elements;

# vim:ft=mbd

##############################################################################################################
## Variables to be updated by simple_testsuite.sh --update-reference-test-status
## Warning, do not edit!!!
## @MBDYN_SIMPLE_TESTSUITE_EXIT_STATUS@ = 0
##############################################################################################################

## @MBDYN_SIMPLE_TESTSUITE_EXCLUDE@ = 0

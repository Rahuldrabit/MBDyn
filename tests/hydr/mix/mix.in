# $Header: /var/cvs/mbdyn/mbdyn/mbdyn-1.0/tests/hydr/mix/mix.in,v 1.4 2014/12/13 17:15:43 masarati Exp $

begin: data;
    problem: initial value;

end: data;

begin: initial value;
  #  abort after: input;
    time step: (real dt = 1.);
    initial time: 0.;
    final time: 100*dt;
    
    set: (real Rho = .6);
    method: ms, Rho, Rho;
    
    max iterations: 10;
    tolerance: 1.e-5;
    
    derivatives coefficient: 1.e-6;
    derivatives max iterations: 10;
    derivatives tolerance: 1.e-4;
    
    fictitious steps number: 2;
    fictitious steps ratio: 1.e-4;
    fictitious steps max iterations: 10;
    fictitious steps tolerance: 1.e-4;

linear solver: umfpack, workspace size, 10000;
threads: disable;
end: initial value;



begin: control data;
#  output file name: "output";

  
  
  hydraulic nodes: 3;       #  numero nodi idraulici
 
  hydraulic elements: 2;    #  numero elementi idraulici
                            
  

  forces: 1;                 #  generatore di portata

  
  genels: 1;                 # generatori di pressione
                   
 
 end: control data;
 
begin: nodes;

#   hydraulic: 3;  #(real p1=12.e5);
#   hydraulic: 4:  # (real p2=2.e5);
    hydraulic: 1; #(real p1=1.e5); # ingresso 
    hydraulic: 2; #(real p2=2.e4); # uscita
    hydraulic: 3; #(real p3=2.e5); # in utilizzatore
#    hydraulic: 4; #(real p4=1.e4); # out utilizzatore

end: nodes;



begin: elements;
 
 # density                  800 kg/m^3		kappa		     10 N/m
 # diametro               0.007 m		precarico	    300 N 
 # viscosità    	    0.9 kg/m/s		larghezza          5e-3 m
 # area tubo   	       3.84 e-5 m^2		massa		  1.e-3 kg 
 # lunghezza		      1	m 		area massima      2.e-4 m^2
 # area diaframma        2. e-5 m^2 50% area tubo  



/*
  hydraulic: 1,pipe,1,2,
		800.,		# densità
		.007,		# diametro
		.9,		# viscosità
		3.84e-5,	# area
		1.,		# lunghezza
		0;       	# flag turbulent
 */
 

 hydraulic: 1,minor losses,1,2,
		.5,		# kappa
		3.84e-5,	# area tubo
		800.;		# densità      
 


 
  hydraulic: 2,orifices,2,3,
		800.,		# densità
		.007,		# diametro idraulico
		.9,		# viscosità
		2.e-5,		# area diaframma
		3.84e-5;	# area tubo



/*
 hydraulic: 1,serbatoio,1,2,
		1.e3,		# press0
		800.,  	# density
                3.84e-5,	# area tubo
 		4.e-3,		# area serbatoio
	        1.;		# livello iniziale dell'olio
  */


/*
 hydraulic: 1,accumulator,1,
		1.e3,		# press0
		1.e5,  		# press_max
                0.5,		# stroke
		3.e-2,		# area 
		4.e-1,		# massa 
		1.3,		# kappa
		800,            # density
		1.e8,		# c_spost 1.e8,  se press0 >> p1 posso aumetare c1
		0.,		# c_vel   1000.,
		0.;		# c_acc	   10.;
*/


/*
  hydraulic: 1,control valve,1,2,3,4,
             	800.,		# 	densità
	   	10; 		# 	stato

*/ 


/*
   hydraulic: 1,pressure valve,1,2,
    	        800.,  		# densità
             	2.e-5, 		# area diaframma
 		1.e-3,  	# massa
		2.e-4,  	# area massima
		1.e1,  		# kappa
		300.,  		# precarico molla
		5.e-3,  	# larghezza
		1.e8,		# c_spost 1.e8,
		1000,		# c_vel   1000.,
		0.;		# c_acc	   10.;
*/


/*
  hydraulic: 1,flow valve,1,2,3,  # 1:ingresso  2: scarico  3:uscita
		800,		# densità
            	2.e-5,   	# area diaframma
 	        1.e-3,  	# massa
		2.e-4,  	# area massima
		10., 		# kappa
		300,  		# precarico molla
		5.e-3,  	# larghezza
		1.e8,		# c_spost 1.e8,
		0,		# c_vel   1000.,
		0.;		# c_acc	   10.;
*/

 
 
  
 # forza generico: generatore di portata
 
   force: 1, abstract, 
          1, hydraulic,
          #const,-1.e-3;
          step,50*dt,1.e-4,1.e-2;
          # array, 2,
	  # random, .01,0.,dt,1000., steps, 10;
	  # sine, 0.,pi,1.e-4,0,0.;  
          # linear, -1.e-2,-1.e-5;
          #  step,5.,-1.e-6,-1.e-3;
 
 
# incastro generico: generatore di pressione

   genel: 1, clamp,    # 2 uscita
             2, hydraulic, 
	    const, 1.e5;        # const, p1;
            #step,4,p1,p1;
            #linear, 1.8e7,5.e7; # per il tubo
            #linear, p1,-5.e3; # per la valvola di pressione
	    #linear, 1.5999e6,50/dt; #per la valvola di portata
	    # linear, 1.e5,10;
            # sine, 0.1,pi,1.e6,0,500000.;




end: elements;

##############################################################################################################
## Variables to be updated by simple_testsuite.sh --update-reference-test-status
## Warning, do not edit!!!
## @MBDYN_SIMPLE_TESTSUITE_EXIT_STATUS@ = 0
##############################################################################################################

## @MBDYN_SIMPLE_TESTSUITE_EXCLUDE@ = 1
